<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Feedbacks - Gem Cabinet</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gem: {
                            dark: '#0f172a', // Slate 900
                            darker: '#020617', // Slate 950
                            gold: '#d4af37', // Metallic Gold
                            goldHover: '#b8962e',
                            accent: '#1e293b', // Slate 800
                        },
                        fontFamily: {
                            serif: ['"Playfair Display"', 'serif'],
                            sans: ['Inter', 'sans-serif'],
                        }
                    }
                }
            }
        }
    </script>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <style>
        /* Custom Scrollbar for dark theme */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0f172a;
        }

        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        /* Gold text gradient effect */
        .text-gradient-gold {
            background: linear-gradient(to right, #fcd34d, #d4af37, #f59e0b);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>

<body class="bg-gem-darker text-gray-200 font-sans antialiased selection:bg-gem-gold selection:text-gem-darker">

    <!-- Navbar -->
    <nav class="fixed w-full z-50 top-0 left-0 bg-gem-dark/95 backdrop-blur-md border-b border-gem-accent transition-all duration-300"
        id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20 lg:h-24">
                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center">
                    <a href="index.html" class="flex flex-col items-start group">
                        <span
                            class="font-serif text-2xl lg:text-3xl font-bold tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-gem-gold via-yellow-200 to-gem-gold filter drop-shadow-sm">
                            GEM CABINET
                        </span>
                        <span
                            class="text-[0.6rem] text-gray-400 uppercase tracking-[0.3em] font-sans group-hover:text-white transition-colors">
                            from the mines of gemcity
                        </span>
                    </a>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="index.html"
                            class="text-gray-300 hover:text-gem-gold px-3 py-2 rounded-md text-sm font-medium transition-colors">Home</a>
                        <a href="inventory.html"
                            class="text-gray-300 hover:text-gem-gold px-3 py-2 rounded-md text-sm font-medium transition-colors">Inventory</a>
                        <a href="feedback.html"
                            class="text-white border-b-2 border-gem-gold px-3 py-2 rounded-md text-sm font-medium transition-colors">Feedback</a>
                        <a href="about.html"
                            class="text-gray-300 hover:text-gem-gold px-3 py-2 rounded-md text-sm font-medium transition-colors">About
                            Ceylon</a>
                        <a href="contact.html"
                            class="bg-gem-gold text-gem-darker hover:bg-white hover:text-gem-darker px-5 py-2 rounded-full text-sm font-bold transition-all transform hover:scale-105 shadow-lg shadow-gem-gold/20 mr-4">Contact</a>
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <div class="-mr-2 flex items-center md:hidden">
                    <button type="button"
                        class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gem-accent focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
                        aria-controls="mobile-menu" aria-expanded="false"
                        onclick="document.getElementById('mobile-menu').classList.toggle('hidden')">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div class="hidden md:hidden bg-gem-dark border-t border-gem-accent" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="index.html"
                    class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Home</a>
                <a href="inventory.html"
                    class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text base font-medium">Inventory</a>
                <a href="feedback.html"
                    class="text-white font-bold block px-3 py-2 rounded-md text-base font-medium border-l-4 border-gem-gold">Feedback</a>
                <a href="about.html"
                    class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">About</a>
                <a href="contact.html"
                    class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Contact</a>
            </div>
        </div>
    </nav>

    <!-- Header Section -->
    <section class="pt-40 pb-20 bg-gem-dark relative overflow-hidden">
        <div class="absolute inset-0 opacity-10">
            <div
                class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-gem-gold via-transparent to-transparent">
            </div>
        </div>
        <div class="relative max-w-7xl mx-auto px-4 text-center">
            <h1 class="text-5xl lg:text-6xl font-serif font-bold text-white mb-6">Customer Feedbacks</h1>
            <div class="w-32 h-1 bg-gem-gold mx-auto mb-8"></div>
            <p class="text-gray-400 max-w-2xl mx-auto text-lg leading-relaxed font-light">
                Discover what our valued clients have to say about their experiences with Gem Cabinet.
            </p>
        </div>
    </section>

    <!-- Main Content -->
    <section class="py-20 bg-gem-darker min-h-screen">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">

                <!-- Feedback List -->
                <div class="lg:col-span-2 space-y-8">
                    <h2 class="text-2xl font-serif text-white mb-8 border-b border-gem-accent pb-4">Recent Experiences
                    </h2>
                    <div id="feedback-container" class="space-y-6">
                        <!-- Feedbacks injected here -->
                    </div>
                </div>

                <!-- Submission Form -->
                <div class="lg:col-span-1">
                    <div class="bg-gem-dark p-8 rounded-sm border border-gem-accent sticky top-32">
                        <h2 class="text-2xl font-serif text-white mb-6">Share Your Experience</h2>
                        <form id="feedback-form" class="space-y-4">
                            <div>
                                <label class="block text-gray-400 text-xs uppercase tracking-widest mb-1">Your
                                    Name</label>
                                <input type="text" id="fb-name" required
                                    class="w-full bg-gem-accent border border-gray-700 rounded-sm p-3 text-white focus:outline-none focus:border-gem-gold transition-colors placeholder:text-gray-600"
                                    placeholder="Enter your name">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-xs uppercase tracking-widest mb-1">Rating</label>
                                <div class="flex gap-2 text-2xl" id="star-rating">
                                    <button type="button"
                                        class="star text-gray-600 hover:text-gem-gold transition-colors"
                                        data-value="1">★</button>
                                    <button type="button"
                                        class="star text-gray-600 hover:text-gem-gold transition-colors"
                                        data-value="2">★</button>
                                    <button type="button"
                                        class="star text-gray-600 hover:text-gem-gold transition-colors"
                                        data-value="3">★</button>
                                    <button type="button"
                                        class="star text-gray-600 hover:text-gem-gold transition-colors"
                                        data-value="4">★</button>
                                    <button type="button"
                                        class="star text-gray-600 hover:text-gem-gold transition-colors"
                                        data-value="5">★</button>
                                </div>
                                <input type="hidden" id="fb-rating" value="5">
                            </div>
                            <div>
                                <label class="block text-gray-400 text-xs uppercase tracking-widest mb-1">Your
                                    Message</label>
                                <textarea id="fb-comment" required rows="4"
                                    class="w-full bg-gem-accent border border-gray-700 rounded-sm p-3 text-white focus:outline-none focus:border-gem-gold transition-colors placeholder:text-gray-600"
                                    placeholder="Tell us about your purchase..."></textarea>
                            </div>
                            <button type="submit"
                                class="w-full bg-gem-gold text-gem-darker font-bold py-4 rounded-sm hover:bg-yellow-500 transition-all duration-300 uppercase tracking-widest text-xs">
                                Submit Feedback
                            </button>
                            <p class="text-[10px] text-gray-500 text-center leading-relaxed">
                                Your feedback will be saved locally and submitted for administrative review before being
                                published globally.
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black py-16 border-t border-gem-accent">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div
                class="flex flex-col md:flex-row justify-between items-center space-y-8 md:space-y-0 text-center md:text-left">
                <div>
                    <span class="text-xl font-serif font-bold text-white tracking-widest">GEM CABINET</span>
                    <p class="text-gray-600 text-xs mt-2 uppercase tracking-[0.2em] font-light">From the mines of
                        gemcity</p>
                </div>
                <div class="flex space-x-12 text-[10px] uppercase tracking-[0.3em] font-medium">
                    <a href="inventory.html"
                        class="text-gray-400 hover:text-gem-gold transition-colors underline decoration-gem-gold/20 underline-offset-8">Inventory</a>
                    <a href="about.html"
                        class="text-gray-400 hover:text-gem-gold transition-colors underline decoration-gem-gold/20 underline-offset-8">Our
                        Story</a>
                </div>
                <div class="text-gray-600 text-[10px] uppercase tracking-widest leading-loose">
                    &copy; 2024 Gem Cabinet.<br>Sri Lanka.
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/feedback.js"></script>
    <script>
        // Star Rating Logic
        const stars = document.querySelectorAll('.star');
        const ratingInput = document.getElementById('fb-rating');

        stars.forEach(star => {
            star.addEventListener('click', () => {
                const val = star.dataset.value;
                ratingInput.value = val;
                updateStars(val);
            });
        });

        function updateStars(val) {
            stars.forEach(s => {
                if (parseInt(s.dataset.value) <= val) {
                    s.classList.remove('text-gray-600');
                    s.classList.add('text-gem-gold');
                } else {
                    s.classList.remove('text-gem-gold');
                    s.classList.add('text-gray-600');
                }
            });
        }
        updateStars(5); // Default

        // Feedback Logic
        const container = document.getElementById('feedback-container');
        const form = document.getElementById('feedback-form');

        function renderFeedback() {
            container.innerHTML = '';

            // Get local storage feedbacks
            const localFeedbacks = JSON.parse(localStorage.getItem('pendingFeedbacks') || '[]');

            // Combine with global feedbacks (global first)
            const allFeedbacks = [...feedbacks, ...localFeedbacks].reverse();

            allFeedbacks.forEach(fb => {
                const card = document.createElement('div');
                card.className = 'bg-gem-dark p-8 rounded-sm border border-gem-accent hover:border-gem-gold/30 transition-all duration-500 group';

                let starsHtml = '';
                for (let i = 1; i <= 5; i++) {
                    starsHtml += `<span class="${i <= fb.rating ? 'text-gem-gold' : 'text-gray-700'}">★</span>`;
                }

                card.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-xl font-serif text-white group-hover:text-gem-gold transition-colors">${fb.name}</h3>
                            <div class="flex gap-1 mt-1 text-sm">
                                ${starsHtml}
                            </div>
                        </div>
                        <span class="text-[10px] text-gray-600 uppercase tracking-widest font-medium">${fb.date}</span>
                    </div>
                    <p class="text-gray-400 leading-relaxed font-light italic">
                        "${fb.comment}"
                    </p>
                `;
                container.appendChild(card);
            });
        }

        form.addEventListener('submit', (e) => {
            e.preventDefault();

            const newFb = {
                id: Date.now(),
                name: document.getElementById('fb-name').value,
                rating: parseInt(document.getElementById('fb-rating').value),
                comment: document.getElementById('fb-comment').value,
                date: new Date().toISOString().split('T')[0]
            };

            // Save to local storage
            const pending = JSON.parse(localStorage.getItem('pendingFeedbacks') || '[]');
            pending.push(newFb);
            localStorage.setItem('pendingFeedbacks', JSON.stringify(pending));

            // Reset form and re-render
            form.reset();
            updateStars(5);
            renderFeedback();

            alert('Thank you for your feedback! It has been saved locally and sent for review.');
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', renderFeedback);
    </script>
    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/94772527143" target="_blank"
        class="fixed bottom-6 right-6 z-[100] bg-[#25D366] text-white p-4 rounded-full shadow-2xl hover:scale-110 transition-all duration-300 group flex items-center justify-center">
        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
            <path
                d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.58-1.76-1.752-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413" />
        </svg>
        <span
            class="absolute right-full mr-4 bg-gem-dark text-white px-4 py-2 rounded-md text-sm font-bold opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-gem-accent shadow-xl pointer-events-none">
            Chat on WhatsApp
        </span>
    </a>
</body>

</html>